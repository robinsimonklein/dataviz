import {d3} from '../vendor/d3.v5.min';
import c3 from 'c3';


// Expéditions Graph

const makayExpeditionsGraph = {
    el: document.querySelector('#makay-expeditions_graph'),
    graph: null,
    init(){
        this.graph = c3.generate({
            bindto: '#makay-expeditions_graph',
            data: {
                x : 'x',
                columns: [
                    ['x', 2007, 2010 ,2010.5, 2011, 2015, 2017, 2018],
                    ['nb_especes', 130, 272, 768, 1106, 1136, 1377, 1379]
                ],
                names: {
                    x: 'Expédition',
                    nb_especes: 'Nombre d\'espèces',
                },
                colors: {
                    nb_especes: '#EBA116'
                },
                type: 'area',
            },
            axis: {
                x: {
                    type: 'category', // this is needed to load string x value
                    categories: ['Plantes','Insectes', 'Poissons', 'Amphibiens', 'Reptiles', 'Oiseaux', 'Mammifères']
                },
                y: {
                    tick: {
                        values: [0, 500, 1000, 1500]
                    }
                }
            },
            grid: {
                y: {
                    show: true,
                }
            },
            padding: {
                left: 70,
                top: 20
            },
            legend: {
                show: false
            },
            height: 300
        });

        this.graph.resize({
            height: 300,
        });
        this.graph.flush();
    }

};


// Especes Graph
const makayEspecesGraph = {
    pictos: [ // Important to keep the same order that datas
        ['plantes','<g class="tick-picto picto-plantes"><path class="st0" d="M324.4,110.2c-2.1-1.3-51.8-32-89.3-17.3c-21.3,8.3-27.1,24.6-28.2,36.7c-1.1,11.7,2.1,21.8,2.6,23.4'+
            'c0.1,0.5,0.3,1,0.5,1.5c-6,6.3-11.8,13.8-16.6,22.7c-5-12.9-11.1-23.8-17.4-32.9c12.7-20.4,9.5-46-1.6-62.9'+
            'c-10.1-15.4-35.4-33.1-66.9-35.5C72.7,43.2,53.8,60.6,53,61.3L45.9,68l8.6,4.6c4.2,2.2,11.3,6,18.3,21.9c1.4,3,2.4,6.7,3.5,10.5'+
            'c3.6,12.3,8,27.7,26.5,42.2c11.2,8.9,24.9,11.4,36.7,11.4c13.2,0,24-3.1,26.6-3.9c21.2,31.6,28.9,70.3,22.8,115.5l13.9,1.9'+
            'c3.9-29.1,2-53.9-3.1-74.7c4.1-11.5,10.1-21.7,18-30.6c7.7,8.1,19.2,13.3,30.5,13.3c2.7,0,5.4-0.3,8.1-0.9'+
            'c18-4.2,28.7-13.2,40.9-34.3c9.6-16.6,25.5-22,25.7-22l14.5-4.6L324.4,110.2z M111.5,136.2c-14.9-11.8-18.3-23.6-21.7-35.1'+
            'c-1.2-4.3-2.4-8.4-4.2-12.3C80.7,77.6,75.5,71,70.3,66.5c7.2-3.7,19.2-7.9,36-6.7c28.6,2.1,49.3,18.6,56.3,29.2'+
            'c7.6,11.7,10.5,28.6,3.9,43.1c-22.3-26.1-46-36.6-47-37l-5.6,12.8c0.2,0.1,22.7,10.2,43.1,34.6C147.3,144.6,126,147.6,111.5,136.2z'+
            'M285,137.8c-10.2,17.7-18,24.4-32,27.7c-9.1,2.1-19.2-2.2-25.2-8.5c3-2.4,6.1-4.8,9.5-6.9c14.1-9.1,26.3-12.1,26.4-12.2l-1.6-6.8'+
            'l-1.6-6.8c-1.3,0.3-19.9,4.9-38.9,19.7c-0.7-3.4-1.3-8.2-0.7-13.5c1.2-11.9,7.5-19.9,19.3-24.5c5.5-2.2,11.5-3.1,17.6-3.1'+
            'c17.7,0,36.3,7.5,47.9,13.1C299,120.4,291,127.3,285,137.8z"/></g>'],
        ['insectes','<g class="tick-picto picto-insectes"><path class="st0" d="M272.4,157.2c-9.2-21-19.6-34.7-23.5-39.5c4.6-11.1,4-21.2,3.9-21.8l-0.4-6.5l-20,0'+
            'c-1.3-7.7-5.7-18.5-15.6-24.2c1.8-6.8,7.6-18.3,26-19.1l-0.6-14c-24.8,1-35.4,16.5-38.9,29c-0.9-0.1-1.9-0.1-2.9-0.1'+
            'c-0.2,0-0.4,0-0.6,0c-1.5,0-3,0.1-4.4,0.3c-3.4-12.6-14.1-28.2-38.9-29.2l-0.6,14c19.3,0.8,24.7,13.2,26.3,20'+
            'c-8.9,5.9-12.6,15.8-13.6,23.2l-20.7,0l0.2,7.2c0.2,7.5,1.5,14.2,3.8,20.2c-3,3.5-14.4,17.6-24.4,40.5'+
            'c-10.4,23.9-21.2,62.2-13.1,109.3l1.1,6.3l6.4-0.6c0.7-0.1,17.3-1.6,34.3-12.1c4.8-3,9.9-6.8,14.7-11.8l26.9,18.5l30-19.7l-0.2-0.4'+
            'c5.2,5.8,10.9,10.2,16.2,13.4c17,10.5,33.6,12,34.2,12.1l6.4,0.6l1.1-6.3C293.6,219.4,282.9,181.1,272.4,157.2z M185,83.7'+
            'c3-5.7,7.9-8.5,15.1-8.6c12.3-0.2,16.6,8.9,18,14.4l-35.2-0.1C183.3,87.7,183.9,85.7,185,83.7z M238.4,103.5'+
            'c-0.8,5.1-2.9,12.2-8.2,18.1c-6.5,7-16.5,10.8-29.8,11l-0.2,0c-0.2,0-16.5,0.6-27.5-9.5c-5.2-4.8-8.5-11.4-9.9-19.7L238.4,103.5z'+
            'M272.8,257.2c-14.8-3.4-49.6-16.5-51.2-64.5l-14,0.5c0.6,18.1,5.4,32.1,11.9,42.7L198,250l-18.4-12.6c7-10.9,12.1-25.2,12.8-44.2'+
            'l-14-0.5c-1.7,48.1-36.5,61.2-51.2,64.5c-5.3-40.3,3.9-73.1,12.9-93.9c7.1-16.3,15-27.9,19.4-33.8c1.1,1.3,2.4,2.6,3.6,3.8'+
            'c13.3,12.2,31,13.2,36.2,13.2c0.6,0,1.1,0,1.3,0c17.3-0.4,30.7-5.7,39.8-15.7c0.1-0.1,0.3-0.3,0.4-0.4'+
            'C252.1,145.4,281.5,192,272.8,257.2z"/></g>'],
        ['poissons','<g class="tick-picto picto-poissons">'+
        '<path class="st0" d="M332.6,157.1c-10-23.4-32.6-40.6-62.1-48.6c-11.3-9-15.5-30.5-16.1-38.2l-0.5-6.5l-6.5,0'+
            'c-56,0.4-81.5,29.1-82.5,30.3l-2.3,2.7l5.9,27.1c-6.6,3.6-12.3,6.6-16.3,7.4c-0.8,0.1-8.6,0.3-41.7-23'+
            'C92.6,95.8,76.7,82.8,76.5,82.7l-9.7,10c0.1,0.2,13.7,16.1,26,33.8c22.1,31.9,19,39.5,19,39.5c-17.2,29.8-38.7,52.6-38.9,52.8'+
            'l10.1,9.7c20-20.6,62.6-36.4,73.7-40.3c4.7,2.2,15.1,6.9,28.7,11.4l-20.9,32.2l8.7,2.8c0.4,0.1,9.2,2.9,21.2,2.9'+
            'c2.1,0,4.4-0.1,6.7-0.3c19.3-1.7,35.1-10.9,46-26.6c7.1,0,14.2-0.5,21.2-1.6c55.8-9.2,64.4-46.2,64.8-47.8l0.5-2.2L332.6,157.1z'+
            'M241.2,78c1.1,6.6,3.6,17,8.6,26.6c-4.5-0.5-9.2-0.9-13.9-1c-22.2-0.6-40.3,6.4-54.7,13.5l-3.5-16.2C184.2,95,204.4,79.8,241.2,78'+
            'z M186.7,223.3l12.6-19.4c9.4,2.5,19.7,4.6,30.4,5.8C215.6,223.9,197.5,224.6,186.7,223.3z M265.9,195.3'+
            'c-48.8,8-105.1-20.5-105.6-20.8l-2.6-1.3l-2.8,0.9c-1.4,0.4-21.7,7.1-43.2,18.1c4-5.9,8.1-12.3,12.1-19.1c3.7-6.3,5-17.7-16.3-49.7'+
            'c30.9,21.2,41.4,22.8,47.1,21.7c6.4-1.2,13.4-5,21.4-9.4c15.4-8.3,34.5-18.7,59.4-18.1c39.3,1,70.8,17.3,83.1,42.7'+
            'C316.2,167.2,305.3,188.8,265.9,195.3z"/>'+
            '<path class="st0" d="M269.3,140.3l-5.2-4.7l-5.2-4.7c-0.3,0.3-6.9,7.6-10.2,18.2c-3.2,10.3-4,25.6,10.5,39.9l9.9-9.9'+
            'c-7.6-7.6-10-15.9-7.1-25.4C264.2,146,269.2,140.4,269.3,140.3z"/>'+
        '</g>'],
        ['amphibiens','<g class="tick-picto picto-amphibiens">'+
        '<path class="st0" d="M326.1,62.1c-7.4-4.4-21.3-5-29.6-4.9c-2.8-8.6-10.4-18.5-26.8-18.5c-16.7,0-24.2,10.2-26.9,18.7'+
        'c-71,5-108.2,31.8-126.9,53.6c-14.3,16.7-20.3,33-22.8,42.1c-7.8-2.5-14.9-2.5-20.6,0.3c-6.7,3.4-16.8,13.4-9,42.5'+
        'c5.2,19.4,14.2,32.5,26.8,39c6.5,3.4,12.8,4.3,18,4.3c6.7,0,11.4-1.6,12-1.8c7.8,6.2,15.1,9.3,21.8,9.3c0.3,0,0.7,0,1,0'+
        'c16-0.7,23.9-7.7,27.7-13.5c2.8-4.2,5.2-10.6,4.7-19.8c6.9-0.5,18.5-2.3,27.4-8.2c3.4,10.1,9.3,19,17.5,26.3l3.9,3.5l4.5-2.8'+
        'c0.2-0.1,22.4-13.9,39.8-7.5l4.8-13.1c-8.9-3.2-18.2-3-26.5-1.3c-2-4.6-11.2-28.2-2.4-49.3c5.8-13.8,18.3-24.2,37.3-30.8'+
        'c43.1-15,53.7-32.8,55-45.2C337.7,74.2,331.9,65.6,326.1,62.1z M322.6,83.6c-0.6,5.5-6.1,19.7-45.7,33.4c-22.9,8-38.3,21-45.6,38.8'+
        'c-10.2,24.6-1.5,50.3,1.9,58.7c-2.8,1.1-5.3,2.3-7.2,3.3c-7.5-8.2-11.1-17.7-12.3-27.2c0.1-0.2,0.1-0.4,0.2-0.5l-0.2-0.1'+
        'c-2.9-23.7,8.4-46.9,8.6-47.2l-6.3-3.1l-6.2-3.1c-0.3,0.6-7.4,14.9-9.8,33.4c-0.9,6.6-1,13-0.5,19c-4.3,7.9-18.7,10.3-26.6,10.7'+
        'c-0.5-1.5-1-3-1.6-4.6c-10.4-27.6-26.2-41.5-26.9-42.1l-9.2,10.6c0.1,0.1,13.8,12.2,23,36.5c4.2,11.1,4.5,20.2,1,25.6'+
        'c-3.6,5.5-11,6.9-16.6,7.2c-12.3,0.6-34.2-26.3-45.8-45.6l-12,7.2c0.3,0.5,7.9,13.1,18.4,25.8c1.5,1.9,3.1,3.6,4.5,5.2'+
        'c-3.2-0.1-7.1-0.8-11.1-2.9c-8.8-4.7-15.4-14.8-19.5-30.1c-3.7-13.8-3.1-23.9,1.8-26.3c6.8-3.4,27,4.6,49,32.5l11-8.7'+
        'c-10.7-13.6-22-24-32.7-30.5c1.5-6.6,6.5-23,21.1-39.8C152.2,90.6,194.3,73.9,249,71l6.3-0.3l0.4-6.3c0.2-2.8,1.9-11.8,14.1-11.8'+
        's13.9,9.3,14.1,12.1l0.4,7l7-0.4c8.5-0.5,23.1,0,27.6,2.8C320.3,74.9,323.2,78.5,322.6,83.6z"/>'+
        '</g>'],
        ['reptiles','<g class="tick-picto picto-reptiles">'+
        '<path class="st0" d="M327.1,122.4c-23.2-30-56.7-50.1-96.9-58.1c-30.2-6-53.4-3.2-54.4-3.1l-6.6,0.8l0.6,6.7'+
            'c0,0.1,0.8,9.8,0.2,20.2c-0.8,14.6-3.8,19.4-4.8,19.9c-5.2,1.9-7.7-0.4-8.9-2.7l-19.4-32.8l-5.1,1.3c-48.6,12.2-66.5,42-73,65'+
            'c-6.9,24.6-2.3,46.1-2.1,47l1.2,5.5l89.6,0.4l6.1,10.9l-12.1,13.5c-10.6-1-19.7,1.4-20.3,1.6l3.6,13.5c0.2-0.1,19.5-4.9,29.6,4.3'+
            'c9.4,8.5,9.6,9.3,7.7,21.6L176,260c1.7-10.8,1.5-17-2.2-23l29.4-32l-7-12.3l26.3,0.1c-2.5,8.1-3.7,17.6-3.7,28.8'+
            'c0,10.2,5.1,26.3,19.6,38.2c7.9,6.5,20.7,13.3,39.7,13.3c5.3,0,11.1-0.5,17.5-1.8c26.1-5.1,47-22.4,56.1-46.5'+
            'C363.2,194.3,354.5,157.9,327.1,122.4z M186.1,203l-21.6,23.5c-0.2-0.2-0.4-0.4-0.7-0.6c-2.3-2-4.7-3.6-7.3-4.9l14-15.7l-7.1-12.8'+
            'l16.7,0.1L186.1,203z M338.6,220c-7.3,19.4-24.4,33.5-45.7,37.6c-18.6,3.6-34.4,0.6-45.6-8.6c-9.9-8.2-14.5-19.9-14.5-27.4'+
            'c0-18.6,3.9-31.9,11.6-39.6c5.6-5.5,13.1-8.2,23.1-8.2c0.1,0,0.3,0,0.4,0c11.6,0.1,20.1,2.9,25.2,8.2c6.5,6.9,6.8,17.3,6.4,25.6'+
            'c-0.2,4-4.6,11.9-12.4,16.1c-4.7,2.5-12.2,4.5-21-0.6c-5.4-3.1-6-7.1-5.5-9.9c0.6-3.6,3.3-6.9,6.1-7.4c3.3-0.7,6.3,3,7.7,5.3'+
            'l11.8-7.5c-8.2-12.9-18.3-12.4-22.3-11.6c-8.5,1.7-15.6,9.5-17.1,18.9c-1.6,9.8,3,18.8,12.3,24.2c11.2,6.6,23.6,6.9,34.7,0.8'+
            'c10.9-5.9,19.2-17.5,19.8-27.6c0.3-6.5,1.2-23.8-10.1-35.9c-7.8-8.3-19.6-12.5-35.3-12.6c-13.9-0.1-25.2,4-33.5,12.3'+
            'c-2.1,2-3.9,4.3-5.5,6.8l-159.5-0.6c-0.8-7.2-1.3-20.8,2.9-35.2c7.6-26.5,27-44.4,57.7-53.3l13.4,22.7c3.2,6.7,12.6,14.6,26.2,9.7'+
            'c8.4-3,12.8-13,14-31.5c0.4-5.9,0.3-11.6,0.2-15.9c8.6-0.4,24.9-0.4,43.9,3.5c37.2,7.5,66.8,25.3,88.1,52.8'+
            'C340.3,162.5,348.4,194.1,338.6,220z"/>'+
        '<path class="st0" d="M115.1,115.4c-11.5,0-20.9,9.4-20.9,20.9s9.4,20.9,20.9,20.9s20.9-9.4,20.9-20.9'+
            'C136,124.7,126.7,115.4,115.1,115.4z M115.1,143.1c-3.8,0-6.9-3.1-6.9-6.9s3.1-6.9,6.9-6.9s6.9,3.1,6.9,6.9'+
            'C122,140,118.9,143.1,115.1,143.1z"/>'+
        '</g>'],
        ['oiseaux','<g class="tick-picto picto-oiseaux">'+
        '<path class="st0" d="M349.4,78.5L304,56l-0.5-0.2c-19.1-7.8-35.4-7.8-48.3-0.2c-16.5,9.8-22,29.2-23.6,37.1l-181.7,112l50.8-0.1'+
            'l-32.3,47.2l118.3-47.1c1.8,0.3,4.6,0.7,8.1,1l-10.4,12.7l29.5,32.5c-11,3.2-17.7,8.5-18.3,8.9l8.8,10.9c0.2-0.2,19.1-15,45.9-4.4'+
            'l5.1-13c-9.1-3.6-17.5-4.9-24.9-4.8l-27.8-30.5l9.6-11.8c17.2-0.7,39.6-4.9,59.5-18.9c32.9-23.3,31.6-63.9,30.1-77.8L349.4,78.5z'+
            'M117.6,204.6l31.5-0.1l-43.3,17.2L117.6,204.6z M263.8,175.7c-14.3,10.1-30.4,14.2-44.1,15.7c1.6-0.9,3.1-1.9,4.7-2.9'+
            'c25-16.1,39-39.7,40.6-68l-14-0.8c-1.3,23.9-12.6,43-33.8,56.8c-14.6,9.5-29.1,13.2-32.2,13.9l-85.7,0.2l145.1-89.4l0.4-3.4'+
            'c0-0.2,2.9-21.6,17.4-30.2c8.9-5.3,20.9-4.9,35.7,1l23.1,11.5l-34.5,22.4l0.9,4.6C287.6,107.6,295.9,153,263.8,175.7z"/>'+
        '</g>'],
        ['mammiferes','<g class="tick-picto picto-mammiferes">'+
        '<path class="st0" d="M389,235.4c-38.5,1.7-50.9-23.4-66.7-55.3c-4-8-8-16.3-12.7-24.3c-20.7-35.6-47.6-36.4-57.3-35.4'+
            'c-11.3-8-30.8-14.5-64.2-12.2c-39.3,2.8-54.3,3.4-60,3.5l-2.2-4.4c1.1-1.8,2.1-3.9,2.9-6.3c3.5-9.9,0.9-15.7-1.9-18.8'+
            'c-5.7-6.2-15.5-5.5-20.7-4.6c-5.8-3.1-20.1-9.3-35.3-3.8c-16.7,6-19.8,18.8-19.1,25.2v4.3c-2.6,2.7-5.9,7.4-6,13.7'+
            'c-0.1,7.1,3.9,13.6,11.9,19.5c12.3,9.1,18.2,14.9,20.5,17.3l2.8,38.8l-22.2,48.2c-7.2,0.5-15,2-22.8,5.2l5.3,13'+
            'c23.4-9.6,47.9-0.4,48.1-0.2l2.5-6.4l3.6,8.2c22.1-9.7,46.4-2.7,46.7-2.7l2.1-7.1l21.2-58.7l3.5,0.3c0,12.4,4.1,29.6,18.6,38.9'+
            'l-7.1,10.7c-7,0.9-14.6,2.5-22.3,5.6l5.1,13c25.2-9.8,49-2.9,49.2-2.9l2.8-9.1l14.8-12.7l-4.7-20.7c10.9,10.2,27.7,20.2,52.5,23.1'+
            'l0.3,1.3c-8,0.8-17,2.6-26.5,6.3l5.1,13c25.3-9.9,47.9-4.2,48.1-4.2l1.4-5.3l10.2-32.1L267,190.9l0.9-46.9l0-0.4'+
            'c0-0.5-0.5-3.9-2.7-8.4c9.1,2.3,21.4,9.1,32.2,27.6c4.4,7.6,8.4,15.7,12.3,23.5c15.4,31.1,31.3,63.2,75.6,63.2c1.4,0,2.8,0,4.2-0.1'+
            'L389,235.4z M95.2,195.3l-2.3-32.6c1.8,1.9,4.5,4.8,7.2,7.8l2.7,28l-19,38.9h-7.9L95.2,195.3z M95.1,245.8l21.8-44.7l-1.4-14.9'+
            'l11.1,10.1l-13.6,45.7C107.4,242.5,101.3,243.7,95.1,245.8z M299.9,224.5l-4.5,14.3h-2.7l-3.5-13.4l-5-0.4'+
            'c-55.8-4-67.1-47.6-67.6-49.4l-13.6,3.2l11.8,52.2l-7.4,6.4l-6.9,0.4l8.3-12.5l-8.4-3c-20.5-7.4-17.1-33.9-16.9-35l1.1-7.3'+
            'l-19.5-1.9l-15.9-25.5l-11.9,7.4l15.9,25.6l-20,55.3H128l14.6-49l-25.1-22.6c-3.7-4.2-11.9-13.3-15.4-17'+
            'c-4.3-4.4-18.5-13.4-22.3-15.8c-3.5-3-8-6.6-13.8-10.9c-4-3-6.2-5.8-6.2-8.1c0-2.3,2.3-4.5,3-5.1l2.9-2.1v-12l-0.1-0.5'+
            'c0-0.1-0.7-6.8,9.9-10.6c12.7-4.6,25.4,3.7,25.5,3.8l2.6,1.8l3.1-0.8c3.6-0.9,8.4-1,9.8-0.2c0.1,0.4,0.2,1.7-0.9,4.6'+
            'c-4.4,12.3-13.3,10.5-16,9.7l-2.2,6.7l-2.3,6.6c4,1.4,12.4,2.4,20.2-1.7l1.7,3.3c0.8,2.3,2.8,4.8,8,4.9c1.8,0,4.5,0,8.4-0.2'+
            'c10.9-0.4,29.6-1.6,55.6-3.4c57.4-4,64.2,19.3,64.8,22.6l-1.1,54.4L299.9,224.5z"/>'+
        '</g>'],
    ],
    el: document.querySelector('#makay-especes_graph'),
    graph: null,
    init(){
        this.graph = c3.generate({
            bindto: '#makay-especes_graph',
            data: {
                columns: [
                    ['endemiques', 0, 0, 0, 0, 0, 0, 0],
                    ['nb_especes', 0, 0, 0, 0, 0, 0, 0],
                ],
                names: {
                    nb_especes: '',
                },
                type: 'bar',

                colors: {
                    nb_especes: '#EBA116',
                    endemiques: '#FF6608'
                },
                labels: {
                    format: {
                        endemiques: function (v, id, i, j) {
                            return v+"%";

                        },
                    }
                },
                groups: [
                    ['nb_especes', 'endemiques']
                ],
                order: function (t1, t2) {
                    return t1.id < t2.id;
                },

            },
            axis: {
                rotated: true,
                x: {
                    type: 'category',

                    categories: ['Plantes','Insectes', 'Poissons', 'Amphibiens', 'Reptiles', 'Oiseaux', 'Mammifères'],
                },
                y: {
                    show:false,
                    tick: {
                        outer: false,
                        fit: false,
                        centered: true,
                        values: [0,100,200,300,400,500,600]
                    },
                    padding: {
                        right: 0,
                    },
                    inner: false,
                    center: 0,

                }
            },
            legend: {
                show: false
            },
        });


        let ticks = this.el.querySelectorAll('.c3-axis-x .tick');

        for(let i=0; i< ticks.length/2; i++){
            ticks[i].innerHTML = this.pictos[i][1];
        }
    },

    changeGraph(id){
        switch(id){
            case 'especes':
                //Load graph
                this.graph.load({

                    columns: [
                        ['nb_especes', 604,459,12,22,58,110,30],
                        ['endemiques', 0, 0, 0, 0, 0, 0, 0]
                    ],

                });
                this.graph.show(['nb_especes']);
                this.graph.hide(['endemiques']);
                this.graph.groups([[ 'endemiques','nb_especes']]);
                this.graph.data.labels = true;
                this.graph.data.names({
                    nb_especes: '',
                    endemiques: 'Endémiques'
                });

                break;
            case 'endemicite':
                this.graph.show(['nb_especes']);
                this.graph.show(['endemiques']);
                this.graph.load({
                    columns: [
                        ['nb_especes', 46, 31, 83, 5, 12, 61, 17],
                        ['endemiques', 54,69, 17, 95, 88, 39, 83]
                    ]
                });
                this.graph.groups([[ 'endemiques','nb_especes']]);
                this.graph.data.labels = false;
                this.graph.data.names({
                    nb_especes: 'Cosmopolytes',
                    endemiques: 'Endémiques'
                });
                break;
        }
    }
};


// Menacées Graph

const makayMenaceesGraph = {
    el: null,
    data: {
        2007: {
            values: {
                NT: 2, VU: 2, EN: 3, CR: 0, EW: 1
            },
            total: null,
        },
        2010: {
            values: {
                NT: 11, VU: 9, EN: 12, CR: 5, EW: 1
            },
            total: null,
        },
        2011: {
            values: {
                NT: 14, VU: 11, EN: 13, CR: 5, EW: 1
            },
            total: null,
        },
        2015: {
            values: {
                NT: 14, VU: 11, EN: 15, CR: 5, EW: 1
            },
            total: null,
        },
        2018: {
            values: {
                NT: 17, VU: 11, EN: 17, CR: 5, EW: 1
            },
            total: null,
        },
    },
    init(){
        this.el = document.querySelector('#makay-menacees_graph');
        let yearCount = 0;
        for(let year in this.data){
            let total = this.data[year].values.NT + this.data[year].values.VU + this.data[year].values.EN + this.data[year].values.CR + this.data[year].values.EW;
            this.data[year].total = total;

            // Set th graph header
            let dateItem = document.createElement('li');
            dateItem.classList.add('dates-item');
            if(yearCount===0){
                dateItem.classList.add('active');
            }
            dateItem.innerHTML = year;
            this.el.querySelector('.makay-menacees_graph_dates ul').append(dateItem);


            // Set th graph with data



            if(yearCount===0){
                console.log(this.data[year].values);

                for(let category in this.data[year].values){
                    let chartLine = document.createElement('div');
                    chartLine.innerHTML = document.querySelector('.makay-content_graph_line_template').innerHTML;
                    chartLine.setAttribute('class', 'makay-content_graph_line');
                    chartLine.setAttribute('id', 'graph_line_'+category);
                    chartLine.querySelector('.makay-content_graph_y').innerHTML = category;

                    for(let dot=0; dot<this.data[year].values[category]; dot++){
                        let item = document.createElement('span');
                        item.classList.add('makay-content_graph_values-item');
                        chartLine.querySelector('.makay-content_graph_values').append(item);
                    }

                    this.el.querySelector('.makay-menacees_graph_chart').append(chartLine);
                }
            }

            yearCount+=1;
        }
        const dateItems = this.el.querySelectorAll('.dates-item');

        dateItems.forEach((date)=>{
            date.addEventListener('click',()=>{
                dateItems.forEach((item)=> {
                    item.classList.remove('active');
                });
                date.classList.add('active');

                this.update(date.innerHTML);
            });
        });
    },
    update(year){
        console.log(this.data[year]);
        for(let category in this.data[year].values){
            let chartLine = this.el.querySelector('#graph_line_'+category);
            let chartLineItems = chartLine.querySelectorAll('.makay-content_graph_values-item')

            if(chartLineItems.length < this.data[year].values[category]){
                // If the category of selected date has a biggest value than actual
                for(let i=0; i<this.data[year].values[category] - chartLineItems.length ;i++){
                    let item = document.createElement('span');
                    item.classList.add('makay-content_graph_values-item');
                    chartLine.querySelector('.makay-content_graph_values').append(item);
                }

            }else{
                for(let i=0; i<chartLineItems.length ;i++){
                    if(this.data[year].values[category] <= 0){
                        chartLineItems[i].remove();
                    }
                    else if(this.data[year].values[category] < i){
                        chartLineItems[i].remove();
                    }
                }
            }

        }

    }
};

export  {makayExpeditionsGraph, makayEspecesGraph, makayMenaceesGraph};